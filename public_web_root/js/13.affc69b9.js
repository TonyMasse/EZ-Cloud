(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"0502":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e._self._c;return t("q-page",{staticClass:"q-pa-sm"},[t("q-header",{class:e.darkMode?"":"bg-grey-1",style:e.darkMode?"background: var(--q-color-dark);":"",attrs:{bordered:""}},[t("q-toolbar",{staticClass:"q-gutter-x-sm",class:e.darkMode?"":"text-black"},[t("img",{staticClass:"q-mr-md",attrs:{src:e.darkMode?"logrhythm_logo_darkmode_wide.svg":"logrhythm_logo_lightmode_wide.svg",alt:"LogRhythm Open Collector"}}),t("q-btn",{attrs:{"no-caps":"",flat:"",dense:"",icon:"o_person",color:"primary",label:e.$t("Manage User Accounts"),to:"/Admin/RBAC/Users"}})],1)],1),t("BreadCrumbs",{attrs:{crumbs:e.breadCrumbs}}),t("q-card",{},[t("q-card-section",{attrs:{horizontal:""}},[t("q-card-section",{staticClass:"col q-ma-none q-pa-none"},[t("q-card-section",{staticClass:"text-h4"},[e._v("\n            "+e._s(e.$t("User Roles"))+"\n        ")]),t("q-card-section",[t("q-table",{attrs:{data:e.tableData,columns:e.columns,"row-key":"roleUid",dense:"","no-data-label":e.$t("No Role to display."),filter:e.searchFilter,loading:e.dataLoading,"rows-per-page-label":e.$t("Roles per page:"),pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[t("div",{staticClass:"full-width row wrap justify-between"},[t("div",{staticClass:"q-table__title"},[e._v("\n                  "+e._s(e.$t("Roles"))+"\n                ")]),t("div",{staticClass:"row q-gutter-md"},[t("div",{staticClass:"col"},[t("q-btn",{staticStyle:{"min-width":"14rem"},attrs:{"no-caps":"",dense:"",color:"primary",icon:"add",label:e.$t("Add New Role")},on:{click:function(t){return e.addNewRole()}}},[t("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                        "+e._s(e.$t("Create a new Role."))+"\n                      ")])],1)],1)]),t("div",{staticClass:"row q-gutter-md"},[t("div",{staticStyle:{width:"300px"}},[t("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:e.$t("Search")},scopedSlots:e._u([{key:"append",fn:function(){return[e.searchFilter.length?t("q-btn",{attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){e.searchFilter=""}}}):e._e(),t("q-icon",{attrs:{name:"o_search"}})]},proxy:!0}]),model:{value:e.searchFilter,callback:function(t){e.searchFilter=t},expression:"searchFilter"}})],1),t("q-btn",{attrs:{dense:"",outline:"",icon:"refresh",loading:e.dataLoading},on:{click:function(t){return e.loadRoles()}}},[t("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                      "+e._s(e.$t("Reload the list of Roles."))+"\n                    ")])],1)],1)])]},proxy:!0},{key:"body-cell-actions",fn:function(o){return[t("q-td",{attrs:{props:o}},[t("q-btn",{attrs:{flat:"",dense:"",icon:"edit"},on:{click:function(t){return e.doPromptForRoleDetails(o.row)}}},[t("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                    "+e._s(e.$t("Edit Role details"))+"\n                  ")])],1),t("q-btn",{attrs:{flat:"",dense:"",icon:"delete",color:"negative"},on:{click:function(t){return e.deleteRolePrompt(o.row)}}},[t("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e._v("\n                    "+e._s(e.$t("Delete Role"))+"\n                  ")])],1)],1)]}},{key:"body-cell-roleIsPrivileged",fn:function(o){return[t("q-td",{attrs:{props:o}},[1===o.value?t("q-icon",{attrs:{name:"o_check_circle_outline",color:"green",size:"md"}}):e._e(),t("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[1===o.value?t("span",[e._v(e._s(e.$t("Privileged role")))]):0===o.value?t("span",[e._v(e._s(e.$t("Non-privileged role")))]):t("span",[e._v(e._s(o.value))])])],1)]}}])})],1)],1),t("q-separator",{attrs:{vertical:""}}),t("q-card-actions",{staticClass:"justify-around q-px-md",attrs:{vertical:""}},[t("q-btn",{attrs:{icon:"add",color:"primary"},on:{click:function(t){return e.addNewRole()}}},[t("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n              "+e._s(e.$t("Add Role"))+"\n            ")])],1),t("q-btn",{attrs:{icon:"refresh",loading:e.dataLoading},on:{click:function(t){return e.loadRoles()}}},[t("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e._v("\n              "+e._s(e.$t("Reload"))+"\n            ")])],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:e.promptForRoleDetails,callback:function(t){e.promptForRoleDetails=t},expression:"promptForRoleDetails"}},[t("q-card",{staticStyle:{"min-width":"350px"}},[t("q-card-section",{staticClass:"row justify-between"},[null!=e.editingRoleUid?t("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("User Role Details")))]):t("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("New User Role")))]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close",color:"grey-5"}})],1),t("q-separator"),t("q-card-section",{},[t("q-input",{attrs:{dense:"",outlined:"",label:e.$t("Name"),autofocus:"",rules:[t=>!!t||e.$t("Role Name cannot be empty")]},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.promptForRoleDetails=!1}},model:{value:e.editingRoleName,callback:function(t){e.editingRoleName=t},expression:"editingRoleName"}})],1),t("q-card-section",{staticClass:"q-pt-none q-mb-md"},[t("q-toggle",{attrs:{label:e.$t("Is Privileged"),"false-value":"0","true-value":1,"left-label":""},model:{value:e.editingRoleIsPrivileged,callback:function(t){e.editingRoleIsPrivileged=t},expression:"editingRoleIsPrivileged"}})],1),t("q-separator"),t("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",outline:"",label:e.$t("Cancel")},on:{click:function(t){return e.cleanEditingVariables()}}}),null!=e.editingRoleUid?t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",color:"primary",label:e.$t("Update User Role"),disabled:!e.editingRoleName||!e.editingRoleName.length},on:{click:function(t){return e.addNewOrUpdateUserRole()}}}):t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"no-caps":"",color:"primary",label:e.$t("Add new User Role"),disabled:!e.editingRoleName||!e.editingRoleName.length},on:{click:function(t){return e.addNewOrUpdateUserRole()}}})],1)],1)],1)],1)},a=[],i=o("2f62"),s=o("1732"),r=o("a87d"),n=o("afd9"),d=o("f423"),c={name:"PageAdminRoles",mixins:[r["a"]],components:{BreadCrumbs:d["a"]},data(){return{searchFilter:"",columns:[{name:"actions",align:"center",label:this.$t("Actions"),field:"actions",sortable:!1},{name:"roleName",align:"center",label:this.$t("Role"),field:"roleName",sortable:!0},{name:"roleIsPrivileged",align:"center",label:this.$t("Is Privileged"),field:"roleIsPrivileged",sortable:!0}],pagination:{sortBy:"roleName",descending:!1,rowsPerPage:20},rolesLoading:!1,promptForRoleDetails:!1,editingRoleUid:null,editingRoleName:null,editingRoleIsPrivileged:null}},computed:{...Object(i["d"])("mainStore",["userRoles"]),tableData(){return this.userRoles},dataLoading(){return this.rolesLoading},breadCrumbs(){return[{icon:"o_home",link:"/Welcome"},{title:this.$t("Admin"),link:"/Admin"},{title:"RBAC"},{title:this.$t("Manage Manage User Roles")}]}},methods:{...Object(i["b"])("mainStore",["getUserRoles","updateUserRole","deleteUserRole"]),loadRoles(){this.getUserRoles({loadingVariableName:"rolesLoading",caller:this})},cleanEditingVariables(){this.editingRoleUid=null,this.editingRoleName="",this.editingRoleIsPrivileged="0"},addNewRole(){this.cleanEditingVariables(),this.promptForRoleDetails=!0},doPromptForRoleDetails(e){console.log("doPromptForRoleDetails"),console.log(e),this.editingRoleUid=e&&e.roleUid?e.roleUid:null,this.editingRoleName=e&&e.roleName?e.roleName:"",this.editingRoleIsPrivileged=e&&e.roleIsPrivileged?e.roleIsPrivileged:"0",this.promptForRoleDetails=!0},addNewOrUpdateUserRole(){this.updateUserRole({roleUid:this.editingRoleUid&&this.editingRoleUid.length?this.editingRoleUid:Object(s["a"])(),roleName:this.editingRoleName,roleIsPrivileged:this.editingRoleIsPrivileged,loadingVariableName:"rolesLoading",caller:this,onSuccessCallBack:this.loadRoles,onErrorCallBack:this.addNewOrUpdateUserRoleFailure}),this.cleanEditingVariables()},addNewOrUpdateUserRoleFailure(e){this.$root.$emit("addAndShowErrorToErrorPanel",e),this.loadRoles()},deleteRolePrompt(e){this.$q.dialog({component:n["a"],parent:this,title:this.$t("Confirm"),message:this.$t("Do you REALLY want to delete this User Role?"),persistent:!0}).onOk((()=>{this.deleteRole(e?e.roleUid:null)}))},deleteRole(e){console.log("deleteRole",e),e&&e.length&&this.deleteUserRole({roleUid:e,loadingVariableName:"rolesLoading",caller:this,onSuccessCallBack:this.loadRoles,onErrorCallBack:this.addNewOrUpdateUserRoleFailure})}},mounted(){this.userRoles&&0===this.userRoles.length&&this.loadRoles()}},p=c,u=o("2877"),g=o("9989"),m=o("e359"),R=o("b498"),h=o("65c6"),b=o("9c40"),v=o("f09f"),f=o("a370"),q=o("eaac"),_=o("05c0"),w=o("27f9"),y=o("0016"),k=o("eb85"),U=o("db86"),N=o("4b7e"),C=o("24e8"),$=o("9564"),P=o("7f67"),F=o("eebe"),x=o.n(F),I=Object(u["a"])(p,l,a,!1,null,null,null);t["default"]=I.exports;x()(I,"components",{QPage:g["a"],QHeader:m["a"],QColor:R["a"],QToolbar:h["a"],QBtn:b["a"],QCard:v["a"],QCardSection:f["a"],QTable:q["a"],QTooltip:_["a"],QInput:w["a"],QIcon:y["a"],QSeparator:k["a"],QTd:U["a"],QCardActions:N["a"],QDialog:C["a"],QToggle:$["a"]}),x()(I,"directives",{ClosePopup:P["a"]})}}]);