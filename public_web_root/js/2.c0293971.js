(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"713b":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"hHh Lpr fFf"}},[e("q-drawer",{staticClass:"column",attrs:{"show-if-above":"","mini-to-overlay":"",width:57,breakpoint:500,bordered:""},model:{value:t.drawerMenuOpen,callback:function(e){t.drawerMenuOpen=e},expression:"drawerMenuOpen"}},[e("div",{staticClass:"fit column"},[e("div",{staticClass:"col"},[e("q-scroll-area",{staticClass:"fit"},[e("q-list",{attrs:{padding:""}},t._l(t.mainLinks,(function(i,o){return e("EssentialLink",t._b({key:o},"EssentialLink",i,!1))})),1)],1)],1),e("q-list",{staticClass:"col-auto"},[t.needToConfigureMsSql?e("q-item",[e("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e("span",{staticClass:"text-orange text-bold"},[t._v(t._s(t.$t("SIEM Not Connected")))]),e("br"),t._v("\n          "+t._s(t.$t("The connection details to the SQL server on the SIEM are missing."))),e("br"),t._v("\n          "+t._s(t.$t("A lot of things will not work until this is configred."))+"\n        ")]),e("q-item-section",[e("q-avatar",{staticClass:"q-pa-none",attrs:{size:"24px",square:""}},[e("q-icon",{attrs:{name:"o_link_off",size:"sm",color:"orange"}})],1)],1)],1):t._e(),t.needToConfigureMsSql?e("q-separator",{staticClass:"q-my-xs"}):t._e(),t.socket.connected?t._e():e("q-item",[e("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[e("span",{staticClass:"text-orange text-bold"},[t._v(t._s(t.$t("Disconnected")))]),e("br"),t._v("\n          "+t._s(t.$t("Live connection with server has been lost."))),e("br"),t._v("\n          "+t._s(t.$t("Some features might not work anymore."))+"\n        ")]),e("q-item-section",[e("q-avatar",{staticClass:"q-pa-none",attrs:{size:"24px",square:""}},[e("q-icon",{attrs:{name:"o_cloud_off",size:"sm",color:"orange"}})],1)],1)],1),t.socket.connected?t._e():e("q-separator",{staticClass:"q-my-xs"}),t._l(t.lowLinks,(function(i,o){return e("EssentialLink",t._b({directives:[{name:"show",rawName:"v-show",value:!i.needsPriviledge||i.needsPriviledge&&t.loggedInUserIsPrivileged,expression:"!link.needsPriviledge || (link.needsPriviledge && loggedInUserIsPrivileged)"}],key:o},"EssentialLink",i,!1))}))],2),e("div",{staticClass:"text-center"},[e("q-tooltip",{attrs:{"content-style":"font-size: 1em"}},[e("span",{staticClass:"text-bold"},[t._v(t._s(t.$t("OC Admin Client version:")))]),t._v(" v"+t._s(t.version)),e("br"),e("span",{staticClass:"text-bold"},[t._v(t._s(t.$t("OC Admin Server version:")))]),t._v(" v"+t._s(t.serverVersion)+"\n      ")]),e("span",{staticStyle:{opacity:".4","font-size":".75em"}},[t._v("v"+t._s(t.version))])],1)],1)]),e("q-page-container",[e("router-view")],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.showErrorPanel,callback:function(e){t.showErrorPanel=e},expression:"showErrorPanel"}},[e("q-card",{staticStyle:{"min-width":"450px"}},[e("q-card-section",{staticClass:"row justify-between q-py-sm"},[e("div",{staticClass:"text-h6"},[t._v(t._s(t.$t("What did just go wrong?")))]),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close",color:"grey-5"}})],1),e("q-separator"),t.errorPanelDetails&&Array.isArray(t.errorPanelDetails)?e("q-card-section",{staticClass:"q-py-xs"},[e("div",{staticClass:"text-bold text-italic"},[t._v(t._s(t.$tc("| {count} error occured. | {count} errors occured.",t.errorPanelDetails.length)))])]):t._e(),e("q-scroll-area",{staticStyle:{height:"300px"},attrs:{visible:""}},t._l(t.errorPanelDetails,(function(i,o){return e("q-card-section",{key:o,staticClass:"q-px-xs"},[e("div",{},[e("div",{staticClass:"row q-my-sm"},[e("q-separator",{attrs:{vertical:"",size:"2px",color:"orange"}}),e("div",{staticClass:"q-ml-sm"},[e("div",{staticClass:"text-overline"},[t._v(t._s(t.$t("Message Code:")))]),e("div",{staticClass:"q-ml-sm text-bold"},[t._v(t._s(i.code))]),e("div",{staticClass:"q-mt-sm text-overline"},[t._v(t._s(t.$t("Message:")))]),e("div",{staticClass:"q-ml-sm text-italic"},[t._v(t._s(i.message))]),e("div",{staticClass:"q-mt-sm text-overline"},[t._v(t._s(t.$t("More information available at:")))]),e("div",{staticClass:"q-ml-sm"},[e("a",{staticClass:"text-primary",attrs:{href:i.wikiLink,target:"_blank"}},[t._v(t._s(i.wikiLink))])])])],1)])])})),1),e("q-separator"),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary","text-color":"white",label:t.$t("Close")}})],1)],1)],1)],1)},s=[],a=(i("14d9"),i("2f62")),n=function(){var t=this,e=t._self._c;return null!==t.title||null!==t.tooltip?e("q-item",{attrs:{clickable:"",tag:t.subMenus&&t.subMenus.length?void 0:"a",href:t.subMenus&&t.subMenus.length?void 0:t.link}},[null!==t.tooltip?e("q-tooltip",{attrs:{"content-style":"font-size: 1rem;"}},[t._v("\n    "+t._s(t.tooltip)+"\n  ")]):t._e(),t.icon?e("q-item-section",{attrs:{side:!(!t.title||!t.title.length)}},[e("q-avatar",{staticClass:"q-pa-none",attrs:{size:"24px",square:""}},[e("q-icon",{attrs:{name:t.icon,size:"sm",color:t.isPageActive?"primary":""}}),null!==t.notification?e("q-badge",{attrs:{floating:"",rounded:"",color:t.notificationColor,"text-color":t.notificationTextColor,label:t.notification}}):t._e()],1)],1):t._e(),t.title&&t.title.length?e("q-item-section",[e("q-item-label",{class:t.isPageActive?"text-primary":""},[t._v(t._s(t.title))])],1):t._e(),t.subMenus&&t.subMenus.length?e("q-menu",{attrs:{"auto-close":"",anchor:"center start",self:"center start"}},[e("q-list",{attrs:{padding:""}},t._l(t.subMenus,(function(i,o){return e("EssentialLink",t._b({key:o},"EssentialLink",i,!1))})),1)],1):t._e()],1):!0===t.spacer?e("q-item"):!0===t.separator?e("q-separator",{staticClass:"q-my-xs"}):t._e()},r=[],l={name:"EssentialLink",props:{title:{type:String,default:null},tooltip:{type:String,default:null},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""},notification:{type:[String,Number],default:null},notificationColor:{type:String,default:"orange"},notificationTextColor:{type:String,default:"white"},subMenus:{type:Array,default:null},spacer:{type:Boolean,default:!1},separator:{type:Boolean,default:!1}},computed:{isPageActive(){if(this.$route.path&&this.$route.path.length){const t=this.link.replace("#/","/");return this.$route.path.startsWith(t,0)}return!1}}},c=l,d=i("2877"),p=i("66e5"),u=i("05c0"),m=i("4074"),f=i("cb32"),h=i("0016"),g=i("58a8"),v=i("0170"),k=i("4e73"),_=i("1c1c"),b=i("eb85"),q=i("eebe"),C=i.n(q),w=Object(d["a"])(c,n,r,!1,null,null,null),y=w.exports;C()(w,"components",{QItem:p["a"],QTooltip:u["a"],QItemSection:m["a"],QAvatar:f["a"],QIcon:h["a"],QBadge:g["a"],QItemLabel:v["a"],QMenu:k["a"],QList:_["a"],QSeparator:b["a"]});var P=i("a87d"),x=i("9fa1"),M=i("9224"),S=i("bd4c"),L={name:"MainLayout",components:{EssentialLink:y},mixins:[P["a"],x["a"]],data(){return{drawerMenuOpen:!1,version:M["b"],showErrorPanel:!1,errorPanelDetails:[]}},computed:{...Object(a["d"])("mainStore",["loggedInUser","loggedInUserIsPrivileged","errorWikiUrlBase","ezMarketNotification","deployment","extraInformation","currentPersistenceLayerAvailability"]),serverVersion(){return this.deployment&&this.deployment.version?this.deployment.version:"?.?.?"},needToConfigureMsSql(){return this.extraInformation&&this.extraInformation.msSqlConnectionConfigMissing&&this.currentPersistenceLayerAvailability&&!0!==this.currentPersistenceLayerAvailability.msSqlAvailable},mainLinks(){return[{title:"",icon:"o_home",link:"#/Welcome"},{title:"",tooltip:this.$t("OpenCollectors"),icon:"o_mediation",link:"#/OpenCollectors"},{title:"",tooltip:this.$t("Pipelines"),icon:"o_account_tree",link:"#/Pipelines"}]},lowLinks(){return[{title:"",tooltip:this.$t("EZ Market Place"),icon:"o_storefront",link:"#/MarketPlace",id:"ezMarketPlace",notification:null,notificationColor:"green",notificationTextColor:"white",subMenus:[{title:this.$t("Notifications"),icon:"o_mail_outline",id:"ezMarketPlaceNotifications",notification:null,notificationColor:"green",notificationTextColor:"white",link:"#/MarketPlace/Notifications"},{title:this.$t("Pipeline Templates"),icon:"o_account_tree",link:"#/MarketPlace/PipelineTemplates"},{title:this.$t("My Profile"),icon:"o_person",link:"#/MarketPlace/PublisherProfile"}]},{separator:!0},{title:"",tooltip:this.$t("Admin"),icon:"o_admin_panel_settings",link:"#/Admin",needsPriviledge:!0,id:"admin",notification:null,notificationColor:"negative",notificationTextColor:"white"},{title:"",tooltip:this.$t("Settings"),icon:"o_settings",link:"#/Settings"},{separator:!0},{title:"",tooltip:this.$t("Log Out"),icon:"o_logout",link:"#/Logout"}]}},methods:{sanitiseWikiLinks(t){try{return String(t).toLowerCase().replace(/[^a-zA-Z0-9_-]/g,"").replace(/ /g,"-")}catch(e){return null}},prepareAndShowErrorPanel(t){if(console.log("prepareAndShowErrorPanel",t),this.errorPanelDetails=[],t&&t.data&&t.data.errors&&Array.isArray(t.data.errors)&&t.data.errors.length)t.data.errors.forEach((t=>{const e=Date.now();this.errorPanelDetails.push({timestamp:e,timestampIso:S["a"].formatDate(e,"YYYY-MM-DDTHH:mm:ss.SSSZ"),code:(t&&null!=t.number?t.number:t.code)||"N/A",message:t&&t.message?t.message:"Unknown error. See Console.",wikiLink:t&&t.message?t&&null!=t.number?this.errorWikiUrlBase+this.sanitiseWikiLinks(t.number):this.errorWikiUrlBase+this.sanitiseWikiLinks(t.code):this.errorWikiUrlBase+"unknown-error-see-console"})}));else{const e=Date.now();this.errorPanelDetails.push({timestamp:e,timestampIso:S["a"].formatDate(e,"YYYY-MM-DDTHH:mm:ss.SSSZ"),code:t&&t.code?t.code:"N/A",message:t&&t.messageForLogAndPopup?t.messageForLogAndPopup:t&&t.captionForLogAndPopup?t.captionForLogAndPopup:"Unknown error. See Console.",wikiLink:t&&t.code?this.errorWikiUrlBase+t.code:t&&t.messageForLogAndPopup||t&&t.captionForLogAndPopup?null:this.errorWikiUrlBase+"unknown-error-see-console"})}this.showErrorPanel=!0,this.errorPanelDetails.forEach((t=>{console.log("ðŸ“œ [LOG] |",t.timestampIso,"| Code:",t.code,"| Message:",t.message,"| WikiLink:",t.wikiLink)}))},updateEzMarketNotificationNumber(t){const e=this.lowLinks.find((t=>"ezMarketPlace"===t.id));if(e){e.notification=t;const i=e.subMenus.find((t=>"ezMarketPlaceNotifications"===t.id));i&&(i.notification=t)}},updateAdminNotificationNumber(t){const e=this.lowLinks.find((t=>"admin"===t.id));e&&(e.notification=t)}},watch:{ezMarketNotification:{handler(t){this.updateEzMarketNotificationNumber(t)},immediate:!0},extraInformation:{handler(t){this.updateAdminNotificationNumber(this.extraInformation&&!0===this.extraInformation.msSqlConnectionConfigMissing?1:null)},deep:!0,immediate:!0}},mounted(){this.$root.$on("addAndShowErrorToErrorPanel",this.prepareAndShowErrorPanel)},beforeDestroy(){this.$root.$off("addAndShowErrorToErrorPanel")}},A=L,$=i("4d5a"),E=i("9404"),Q=i("4983"),I=i("09e3"),z=i("24e8"),D=i("f09f"),N=i("a370"),T=i("9c40"),O=i("4b7e"),W=i("7f67"),U=Object(d["a"])(A,o,s,!1,null,null,null);e["default"]=U.exports;C()(U,"components",{QLayout:$["a"],QDrawer:E["a"],QScrollArea:Q["a"],QList:_["a"],QItem:p["a"],QTooltip:u["a"],QItemSection:m["a"],QAvatar:f["a"],QIcon:h["a"],QSeparator:b["a"],QPageContainer:I["a"],QDialog:z["a"],QCard:D["a"],QCardSection:N["a"],QBtn:T["a"],QCardActions:O["a"]}),C()(U,"directives",{ClosePopup:W["a"]})}}]);